import{j as s,H as v,g as Y}from"./index-BH_Sj8Pp.js";import{d as w,r as A,u as E}from"./router-Bu5b4_LN.js";import{h as L}from"./moment-BjLXg0w5.js";import{a as C,P as M}from"./index-Db76sbz3.js";import{C as S}from"./card-DONfh0P9.js";import{L as k,P as z}from"./index-DTMzSM_q.js";import{E as T}from"./eye-Dxx2QWj_.js";import{P as R}from"./pencil-Dd1Dsaqp.js";import"./axios-DmypytPv.js";import"./select-HnLFh1Z1.js";function O(){var u,a,d,h,f,g,p,j,b,N;const x=w(),[m,y]=A.useState(1),[l,$]=A.useState(10),D=E(),t=new URLSearchParams(D.search).get("paymentstatus")??"",c=t=="0"?"0":"",i=C({api:`${Y.amountList}?page=${m}&limit=${l}&paidstatus=${c}`,key:"paymentListAmount",value:[m,l,c],options:{enabled:!0}}),r=()=>{var e,n;return(n=(e=i.data)==null?void 0:e.data.docs)==null?void 0:n.filter(o=>t=="0"?o.amount-o.paidAmount>0:t=="1"?o.paidAmount>0:t=="2"?o.dueAmount>0:o)};return s.jsx(M,{title:"Transaction List",children:s.jsxs(k,{isLoading:i.isLoading,dataLength:(u=r())==null?void 0:u.length,children:[s.jsx("div",{className:"flex justify-between items-center  mt-2 mb-2",children:s.jsxs("h1",{className:`text-sm font-semibold 
          ${t=="0"&&"text-red-700"}
          ${t=="1"&&"text-green-700"}
          ${t=="2"&&"text-blue-700"}
          
            `,children:["Total Amount-:"," ",t=="0"&&((a=r())==null?void 0:a.reduce((e,n)=>e+n.amount,0))||t=="1"&&((d=r())==null?void 0:d.reduce((e,n)=>e+n.paidAmount,0))||t=="2"&&((h=r())==null?void 0:h.reduce((e,n)=>e+n.dueAmount,0))||t==""&&((f=r())==null?void 0:f.reduce((e,n)=>e+n.amount,0))]})}),s.jsx("div",{className:"grid grid-cols-1 gap-3",children:(g=r())==null?void 0:g.map((e,n)=>{var o,P;return s.jsx(S,{className:" shadow-none rounded-2xl bg-secondary",children:s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{children:[s.jsxs("h1",{className:"text-base font-semibold text-foreground",children:["Name-: ",e.member.memberName]}),s.jsxs("small",{className:"text-xs font-semibold text-muted-foreground",children:["Email-: ",(o=e==null?void 0:e.member)==null?void 0:o.email]}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xs font-semibold text-muted-foreground",children:["Mobile-: ",(P=e==null?void 0:e.member)==null?void 0:P.mobile]}),s.jsxs("h1",{className:"text-xs font-semibold text-muted-foreground",children:["Plan-: ",e.member.planName]})]}),s.jsx("div",{children:t=="0"&&s.jsxs("h1",{className:"text-xs font-semibold text-muted-foreground",children:["Unpaid Amount-: ",(e==null?void 0:e.amount)-(e==null?void 0:e.paidAmount)]})||t=="1"&&s.jsxs("h1",{className:"text-xs font-semibold text-muted-foreground",children:["Paid Amount-: ",e==null?void 0:e.paidAmount]})||t=="2"&&s.jsxs("h1",{className:"text-xs font-semibold text-muted-foreground",children:["Due Amount-: ",e==null?void 0:e.dueAmount]})||t==""&&s.jsxs("h1",{className:"text-xs font-semibold text-muted-foreground",children:["Total Amount-: ",e==null?void 0:e.amount]})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xs font-semibold text-muted-foreground",children:["Start date-:"," ",L(e.startDate).format("DD-MM-YYYY")]}),s.jsxs("h1",{className:"text-xs font-semibold text-muted-foreground",children:["End date-: ",L(e.endDate).format("DD-MM-YYYY")]})]})]})}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("div",{children:s.jsx(v,{size:"sm",className:"bg-blue-100 text-white rounded-xl",onClick:()=>x(`/gym-app/view-member/${e==null?void 0:e.member._id}`),children:s.jsx(T,{size:15,className:"text-blue-600"})})}),s.jsx("div",{children:s.jsx(v,{size:"sm",className:"bg-green-100 text-white rounded-xl",onClick:()=>x(`/gym-app/update-member/${e==null?void 0:e.member._id}`),children:s.jsx(R,{size:15,className:"text-green-600"})})})]})]})})},n+1)})}),s.jsx("div",{className:"flex justify-end mt-3",children:s.jsx(z,{page:m,perPage:l,totalPage:(p=i.data)==null?void 0:p.data.totalDocs,hasNextPage:(b=(j=i.data)==null?void 0:j.data)==null?void 0:b.hasNextPage,hasPrevPage:(N=i.data)==null?void 0:N.data.hasPrevPage,setPage:y,setPerPage:$})})]})})}export{O as default};
